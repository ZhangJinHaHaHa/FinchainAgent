# FinChain-Agent: å»ä¸­å¿ƒåŒ–å¯æº¯æºé‡‘èåˆ†ææ™ºèƒ½ä½“ç½‘ç»œ (Demo)

## ğŸ“– é¡¹ç›®ç®€ä»‹

**FinChain-Agent** æ˜¯ä¸€ä¸ªåŸºäº **LangChain** å’Œ **LangGraph** æ„å»ºçš„é«˜çº§å¤šæ™ºèƒ½ä½“ï¼ˆMulti-Agentï¼‰åä½œç³»ç»Ÿã€‚è¯¥ç³»ç»Ÿæ¨¡æ‹Ÿäº†ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„é‡‘èåˆ†æå¸‚åœºï¼Œå¼•å…¥äº†**å¹¶è¡Œç«äº‰æœºåˆ¶**å’Œ**ä»£å¸ç»æµæ¨¡å‹**ã€‚

åœ¨è¿™ä¸ªç³»ç»Ÿä¸­ï¼Œä¸‰ä½ç‹¬ç«‹çš„ AI é‡‘èåˆ†æå¸ˆå¹¶è¡Œå·¥ä½œï¼Œå¯¹åŒä¸€é—®é¢˜è¿›è¡Œæ·±åº¦ç ”ç©¶ã€‚ä¸€ä½é¦–å¸­å®¡è®¡å®˜ï¼ˆAuditorï¼‰ä½œä¸ºè£åˆ¤ï¼Œè¯„é€‰å‡ºæœ€ä½³åˆ†ææŠ¥å‘Šã€‚è·èƒœè€…å°†è·å¾— **FCA ä»£å¸** å¥–åŠ±ï¼Œä¸”å…¶æŠ¥å‘Šä¼šè¢«æ°¸ä¹…è®°å½•åœ¨æ¨¡æ‹ŸåŒºå—é“¾ä¸Šï¼Œå¹¶ç”Ÿæˆç²¾ç¾çš„ HTML ç ”æŠ¥ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- **ğŸï¸ å¹¶è¡Œç«äº‰ä¸è¿­ä»£ä¼˜åŒ– (Iterative Competition)**:
  - **ç¬¬ä¸€è½® (Draft)**: ä¸‰ä½åˆ†æå¸ˆå¹¶è¡Œæ’°å†™åˆç¨¿ã€‚
  - **ä¸­åœºç‚¹è¯„ (Critique)**: å®¡è®¡å‘˜å¯¹ä¸‰ä»½åˆç¨¿è¿›è¡Œä¼˜ç¼ºç‚¹ç‚¹è¯„ï¼Œæå‡ºæ”¹è¿›å»ºè®®ã€‚
  - **ç¬¬äºŒè½® (Refinement)**: åˆ†æå¸ˆæ ¹æ®åé¦ˆä¼˜åŒ–æŠ¥å‘Šã€‚
  - **æœ€ç»ˆå†³é€‰ (Final Judge)**: å®¡è®¡å‘˜é€‰å‡ºä¼˜åŒ–åçš„æœ€ä½³æŠ¥å‘Šã€‚

- **âš–ï¸ æ™ºèƒ½å®¡è®¡ä¸è£åˆ¤ (AI Judge)**:
  - **é¦–å¸­å®¡è®¡å®˜ (Chief Auditor)**: æ—¢æ˜¯å¯¼å¸ˆä¹Ÿæ˜¯è£åˆ¤ï¼Œè´Ÿè´£æä¾›åé¦ˆå’Œæœ€ç»ˆè£å†³ã€‚

- **ğŸ’° ä»£å¸ç»æµç³»ç»Ÿ (Token Economy)**:
  - **FCA Token**: å†…ç½®åŸç”Ÿä»£å¸ç³»ç»Ÿã€‚
  - **æ¿€åŠ±æœºåˆ¶**: åªæœ‰è·èƒœçš„åˆ†æå¸ˆä¼šè·å¾— **100 FCA** å¥–åŠ±ï¼Œå®¡è®¡å‘˜è·å¾— **20 FCA** åŸºç¡€å·¥èµ„ã€‚ç³»ç»Ÿè‡ªåŠ¨ç»´æŠ¤ `token_ledger.json` è´¦æœ¬ã€‚

- **ğŸ“„ è‡ªåŠ¨åŒ–ç²¾ç¾ç ”æŠ¥ (Premium HTML Report)**:
  - æ¯æ¬¡åˆ†æç»“æŸåï¼Œè‡ªåŠ¨ç”ŸæˆåŒ…å«åŒºå—é“¾å“ˆå¸Œã€è·èƒœç†ç”±å’Œå®Œæ•´åˆ†æçš„ HTML æ ¼å¼ç ”æŠ¥ï¼Œå¹¶è‡ªåŠ¨åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ã€‚

- **ğŸ”— æ¨¡æ‹ŸåŒºå—é“¾å­˜è¯ (Blockchain Mock)**:
  - è·èƒœæŠ¥å‘Šçš„å“ˆå¸Œå€¼ï¼ˆHashï¼‰ä¼šè¢«è®¡ç®—å¹¶è®°å½•åœ¨ `blockchain_ledger.json` ä¸­ï¼Œç¡®ä¿è¯æ®ä¸å¯ç¯¡æ”¹ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Python 3.10+**
- **LangChain / LangGraph**: å¤æ‚çš„å¹¶è¡ŒçŠ¶æ€å›¾ç¼–æ’
- **DeepSeek API**: é«˜æ€§èƒ½å¤§è¯­è¨€æ¨¡å‹ (OpenAI å…¼å®¹)
- **Tavily API**: æ·±åº¦é‡‘èæœç´¢ (Topic: Finance)
- **HTML/CSS**: è‡ªåŠ¨åŒ–æŠ¥è¡¨ç”Ÿæˆ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿ä½ å·²å®‰è£… Condaï¼Œå¹¶åˆ›å»ºä¸“ç”¨ç¯å¢ƒï¼š

```bash
# åˆ›å»ºå¹¶æ¿€æ´»ç¯å¢ƒ
conda create -n FinchainAgent python=3.11
conda activate FinchainAgent

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½® API Key

åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª `.env` æ–‡ä»¶ï¼š

```env
DEEPSEEK_API_KEY=your_deepseek_api_key
TAVILY_API_KEY=your_tavily_api_key
```

### 3. è¿è¡Œç³»ç»Ÿ

è¿è¡Œä¸»ç¨‹åºï¼Œå¼€å¯å¹¶è¡Œåˆ†ææµç¨‹ï¼š

```bash
python main.py
```

**ç¤ºä¾‹è¾“å…¥**:
> "åˆ†ææ¯”ç‰¹å¸å’Œä»¥å¤ªåŠè¿‡å»ä¸€å‘¨çš„å¸‚åœºè¡¨ç°åŠæœªæ¥è¶‹åŠ¿"

ç³»ç»Ÿå°†è‡ªåŠ¨ï¼š
1. å¯åŠ¨ 3 ä½åˆ†æå¸ˆå¹¶è¡Œæœç´¢ä¸å†™ä½œï¼ˆåˆç¨¿ï¼‰ã€‚
2. å®¡è®¡å‘˜ç»™å‡ºæ”¹è¿›å»ºè®®ã€‚
3. åˆ†æå¸ˆæ ¹æ®å»ºè®®ä¿®æ”¹ï¼ˆç»ˆç¨¿ï¼‰ã€‚
4. å®¡è®¡å‘˜è¯„é€‰æœ€ä½³æ–¹æ¡ˆã€‚
5. å‘æ”¾ä»£å¸å¥–åŠ±å¹¶ç”Ÿæˆç ”æŠ¥ã€‚

### 4. éªŒè¯æ•°æ®

- **æŸ¥çœ‹ä»£å¸è´¦æœ¬**: `token_ledger.json`
- **æŸ¥çœ‹åŒºå—é“¾è®°å½•**: `blockchain_ledger.json`
- **æŸ¥çœ‹ç ”æŠ¥**: `financial_report.html`

## ğŸ§© å·¥ä½œæµåŸç† (Workflow)

```mermaid
graph TD
    User[ç”¨æˆ·è¯·æ±‚] --> Dispatcher{ä»»åŠ¡åˆ†å‘}
    
    subgraph Round 1 & 2 [å¹¶è¡Œåˆ†æä¸è¿­ä»£]
        Dispatcher --> AnalystA[åˆ†æå¸ˆ A]
        Dispatcher --> AnalystB[åˆ†æå¸ˆ B]
        Dispatcher --> AnalystC[åˆ†æå¸ˆ C]
        
        AnalystA <-->|Tavily Search| ToolsA[å·¥å…·è°ƒç”¨]
        AnalystB <-->|Tavily Search| ToolsB[å·¥å…·è°ƒç”¨]
        AnalystC <-->|Tavily Search| ToolsC[å·¥å…·è°ƒç”¨]
        
        AnalystA --> Auditor[é¦–å¸­å®¡è®¡å®˜]
        AnalystB --> Auditor
        AnalystC --> Auditor
        
        Auditor -->|åé¦ˆå»ºè®® (Round 1)| Dispatcher
    end
    
    Auditor -->|æœ€ç»ˆè¯„é€‰ (Round 2)| Blockchain[ä¸Šé“¾å­˜è¯]
    
    subgraph Post Processing [åå¤„ç†é˜¶æ®µ]
        Blockchain --> Token[ä»£å¸åˆ†å‘]
        Token --> HTML[ç”Ÿæˆ HTML ç ”æŠ¥]
    end
    
    HTML --> End[ç»“æŸ]
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
FinChain-Agent/
â”œâ”€â”€ agents.py           # æ™ºèƒ½ä½“å·¥å‚ (åˆ›å»º A, B, C, Auditor)
â”œâ”€â”€ main.py             # LangGraph å¹¶è¡Œå·¥ä½œæµç¼–æ’
â”œâ”€â”€ tools.py            # Tavilyæœç´¢, åŒºå—é“¾Mock, ä»£å¸ç®¡ç†å™¨
â”œâ”€â”€ html_generator.py   # HTML ç ”æŠ¥ç”Ÿæˆå™¨
â”œâ”€â”€ utils.py            # å“ˆå¸Œè®¡ç®—å·¥å…·
â”œâ”€â”€ verify_tokens.py    # ä»£å¸ç³»ç»ŸéªŒè¯è„šæœ¬
â”œâ”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ blockchain_ledger.json # åŒºå—é“¾è´¦æœ¬ (è‡ªåŠ¨ç”Ÿæˆ)
â”œâ”€â”€ token_ledger.json      # ä»£å¸è´¦æœ¬ (è‡ªåŠ¨ç”Ÿæˆ)
â””â”€â”€ financial_report.html  # æœ€æ–°ç ”æŠ¥ (è‡ªåŠ¨ç”Ÿæˆ)
```

## âš ï¸ æ³¨æ„äº‹é¡¹

- **API æ¶ˆè€—**: ç”±äºåŒæ—¶è¿è¡Œ 3 ä¸ªåˆ†æå¸ˆï¼ŒToken æ¶ˆè€—é‡æ˜¯å•æ™ºèƒ½ä½“æ¨¡å¼çš„ 3 å€å·¦å³ï¼Œè¯·ç•™æ„ API é¢åº¦ã€‚
- **æœç´¢è´¨é‡**: ç³»ç»Ÿå·²é…ç½® Tavily çš„ `finance` ä¸»é¢˜å’Œ `advanced` æ·±åº¦ï¼Œä»¥ç¡®ä¿è·å–é«˜è´¨é‡é‡‘èæ•°æ®ã€‚